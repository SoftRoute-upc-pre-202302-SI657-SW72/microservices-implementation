version: '3'
services:
  discovery-service:
    image: mundex/discovery-service:1
    ports:
      - 8761:8761
  config-server:
    image: mundex/config-server:1
    links:
      - discovery-service
    environment:
      - JAVA_OPTS=
        -DEUREKA_SERVER=http://discovery-service:8761/eureka
    depends_on:
      - discovery-service
    ports:
      - 8888:8888
  api-gateway:
    image: mundex/api-gateway:1
    links:
      - discovery-service
    environment:
      - JAVA_OPTS=
        -DEUREKA_SERVER=http://discovery-service:8761/eureka
    depends_on:
      - discovery-service
    ports:
      - 8080:8080
  enterprise-microservice:
    image: mundex/enterprise-microservice:1
    environment:
      - JAVA_OPTS=
        -DEUREKA_SERVER=http://discovery-service:8761/eureka
    depends_on:
      - discovery-service
      - config-server
      - api-gateway
      - agency-microservice
    ports:
      - 8083:8083
  agency-microservice:
    image: mundex/agency-microservice:1
    environment:
      - JAVA_OPTS=
        -DEUREKA_SERVER=http://discovery-service:8761/eureka
    depends_on:
      - discovery-service
      - config-server
      - api-gateway
    ports:
      - 8084:8084
  shipment-microservice:
    image: mundex/shipment-microservice:1
    environment:
      - JAVA_OPTS=
        -DEUREKA_SERVER=http://discovery-service:8761/eureka
    depends_on:
      - discovery-service
      - config-server
      - api-gateway
      - client-microservice
    ports:
      - 8082:8082
  client-microservice:
    image: mundex/client-microservice:1
    environment:
      - JAVA_OPTS=
        -DEUREKA_SERVER=http://discovery-service:8761/eureka
    depends_on:
      - discovery-service
      - config-server
      - api-gateway
    ports:
      - 8081:8081
  feedback-service:
    image: mundex/feedback-service:1
    environment:
      - JAVA_OPTS=
        -DEUREKA_SERVER=http://discovery-service:8761/eureka
    depends_on:
      - discovery-service
      - config-server
      - api-gateway
      - shipment-microservice
    ports:
      - 8085:8085
  verification-service:
    image: mundex/verification-service:1
    environment:
      - JAVA_OPTS=
        -DEUREKA_SERVER=http://discovery-service:8761/eureka
    depends_on:
      - discovery-service
      - config-server
      - api-gateway
    ports:
      - 8086:8086
  package-status-microservice:
    image: mundex/package-status-microservice:1
    environment:
      - JAVA_OPTS=
        -DEUREKA_SERVER=http://discovery-service:8761/eureka
    depends_on:
      - discovery-service
      - config-server
      - api-gateway
    ports:
      - 8087:8087